{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["'use strict'\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst refs = {\n    formEl: document.querySelector('.form'),\n    galleryEl: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader')\n}\n\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\nrefs.loader.style.visibility = 'hidden';\n\nfunction onFormSubmit(e) {\n    e.preventDefault();\n    refs.galleryEl.innerHTML = '';\n    const value = e.target.elements.valueGallery.value;\n    if (value !== '') {\n        refs.loader.style.visibility = 'visible';\n    }        \n    getUrl(value).then(data => {\n        if (data.length > 0 & value !== '') {\n            refs.loader.style.visibility = 'hidden';\n            renderImages(data);\n        } else {\n            refs.loader.style.visibility = 'hidden';\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topCenter',\n            })\n        }\n    });\n        \n    e.target.reset();\n};\n\nfunction getUrl(clientValue) {\n    const BASE_URL = 'https://pixabay.com';\n    const ENDPOINT = '/api/';\n    const searchParams = new URLSearchParams({\n        key: '42132466-2eec74b8e2a534f613ea758a4',\n        q: clientValue,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n    });\n    const url = `${BASE_URL}${ENDPOINT}?${searchParams}`;\n    \n    return fetch(url)\n        .then(data => {\n            if (!data.ok) {\n                throw new Error(data.status);\n            }\n            return data.json();\n        })\n        .then(data => data.hits);\n\n}\n\n\n\nfunction imageTemplate(img) {\n    const {webformatURL, largeImageURL, tags, likes, views, comments, downloads} = img;\n    \n    return `<li>\n    <div class=\"card\">\n    <div class=\"img-container\">\n    <a href=\"${largeImageURL}\">\n    <img src=\"${webformatURL}\" alt=\"${tags}\" />\n    </a>\n    </div>\n    <div class=\"img-comments\">\n    <p class=\"describe\">Likes ${ likes }</p>\n    <p class=\"describe\">Views ${ views }</p>\n    <p class=\"describe\">Comments ${ comments }</p>\n    <p class=\"describe\">Downloads ${downloads}</p>\n    </div>\n    </div>\n    </li>\n    `;\n}\n\n\nfunction imagesTemplate(images) {\n    return images.map(imageTemplate).join('');\n}\nfunction renderImages(images) {\n    const markup = imagesTemplate(images) ;\n    refs.galleryEl.innerHTML = markup;\n    let simpleLightBox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 }).refresh();\n};\n\n"],"names":["refs","onFormSubmit","e","value","getUrl","data","renderImages","iziToast","clientValue","BASE_URL","ENDPOINT","searchParams","url","imageTemplate","img","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesTemplate","images","markup","SimpleLightbox"],"mappings":"6vBAQA,MAAMA,EAAO,CACT,OAAQ,SAAS,cAAc,OAAO,EACtC,UAAW,SAAS,cAAc,UAAU,EAC5C,OAAQ,SAAS,cAAc,SAAS,CAC5C,EAGAA,EAAK,OAAO,iBAAiB,SAAUC,CAAY,EACnDD,EAAK,OAAO,MAAM,WAAa,SAE/B,SAASC,EAAaC,EAAG,CACrBA,EAAE,eAAc,EAChBF,EAAK,UAAU,UAAY,GAC3B,MAAMG,EAAQD,EAAE,OAAO,SAAS,aAAa,MACzCC,IAAU,KACVH,EAAK,OAAO,MAAM,WAAa,WAEnCI,EAAOD,CAAK,EAAE,KAAKE,GAAQ,CACnBA,EAAK,OAAS,EAAIF,IAAU,IAC5BH,EAAK,OAAO,MAAM,WAAa,SAC/BM,EAAaD,CAAI,IAEjBL,EAAK,OAAO,MAAM,WAAa,SAC/BO,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,WAC1B,CAAa,EAEb,CAAK,EAEDL,EAAE,OAAO,OACb,CAEA,SAASE,EAAOI,EAAa,CACzB,MAAMC,EAAW,sBACXC,EAAW,QACXC,EAAe,IAAI,gBAAgB,CACrC,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,EACKI,EAAM,GAAGH,IAAWC,KAAYC,IAEtC,OAAO,MAAMC,CAAG,EACX,KAAKP,GAAQ,CACV,GAAI,CAACA,EAAK,GACN,MAAM,IAAI,MAAMA,EAAK,MAAM,EAE/B,OAAOA,EAAK,MACxB,CAAS,EACA,KAAKA,GAAQA,EAAK,IAAI,CAE/B,CAIA,SAASQ,EAAcC,EAAK,CACxB,KAAM,CAAC,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,EAAIP,EAE/E,MAAO;AAAA;AAAA;AAAA,eAGIE;AAAA,gBACCD,WAAsBE;AAAA;AAAA;AAAA;AAAA,gCAILC;AAAA,gCACAC;AAAA,mCACGC;AAAA,oCACAC;AAAA;AAAA;AAAA;AAAA,KAKpC,CAGA,SAASC,EAAeC,EAAQ,CAC5B,OAAOA,EAAO,IAAIV,CAAa,EAAE,KAAK,EAAE,CAC5C,CACA,SAASP,EAAaiB,EAAQ,CAC1B,MAAMC,EAASF,EAAeC,CAAM,EACpCvB,EAAK,UAAU,UAAYwB,EACN,IAAIC,EAAe,aAAc,CAAE,aAAc,MAAO,aAAc,IAAK,EAAE,QAAU,CAChH"}